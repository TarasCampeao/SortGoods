var pizzasList={cap:{dough:1,tomato_sauce:1,onion:2,sausage:2,mashroom:3,cheez:1},onions:{dough:1,tomato_sauce:1,onion:2,meat:1,cheez:1},king_one:{dough:1,tomato_sauce:1,onion:2,mayo:1,mashroom:3,tomato:2,cheeze:3,dill:2,parsley:2},gavay:{dough:1,tomato_sauce:1,onion:2,ananas:1,cheez:2},tonno:{dough:1,tomato_sauce:1,tuna:2,kappers:1,cheez:1},vegeterian:{dough:1,tomato_sauce:1,tomato:2,kappers:1,cucumber:2,onion:2,cheez:1}},result=getPizzaInfo(["cap","cap","onions","gavay","cap","tonno","tonno","vegeterian","king_one"]);function getPizzaInfo(o){var a={},n={};return o.map(function(o){var e=pizzasList[o];e&&(a[o]?a[o]+=a[o]:a[o]=1,Object.keys(e).map(function(o){n[o]?n[o]+=e[o]:n[o]=e[o]}))}),{popular:Object.keys(a).sort(function(o,e){return a[o]>a[e]?-1:1}).slice(0,5),ingridients:Object.keys(n).sort(function(o,e){return n[o]>n[e]?-1:1})}}console.log(result);